ps-assessment
=========
Intended to be used in creating & validating a module's assessment question file for [Pluralsight](http://www.pluralsight.com). Specifically you can do the following things with this package:

- create assessment questions pragmatically
- extract questions from a Pluralsight `*.meta` file format
- extract questions from marker objects within an Adobe XMP<sup>TM</sup> file generated by Adobe Premiere CC & Adobe Media Encoder CC
- validate the assessment file per Pluralsight's requirements
- create an assessment file (questions.txt / no-questions.txt) based on questions provided

> **NOTE:** Rather than using traditional callbacks, promises are returned for async calls using the popular [Q](https://github.com/kriskowal/q) promise library.


Installation
------------
Install using NPM:

````
$ npm install ps-assessment
````

Create Assessment Questions Programatically
-------------------------------------------
````javascript
var Assessment = require('ps-assessment');

var assessment = new Assessment();

assessment.questions.push({
    question: 'Q) Question number 1',
    answers: ['- answer 1', '- answer 2', '* answer 3'],
    clipNumber: 1,
    timeCode: '12:34'
});
assessment.questions.push({
    question: 'Q) Question number 2',
    answers: ['- answer 4', '- answer 5', '* answer 6'],
    clipNumber: 1,
    timeCode: '34:56'
});
````

Extract Questions from Pluralsight `*.meta` Format
--------------------------------------------------
````javascript
var Assessment = require('ps-assessment');

var pathToMetaFile = path.join(sourcePath, 'questions.txt');

Assessment.loadQuestionsFromMetaFile(pathToMetaFile)
  .then(function (assessment) {
    assessment.questions.forEach(element){
      Console.log('question: ' + element.question);
      element.answers.forEach(answer){
        Console.log(' answer: ' + answer)
      };
      Console.log('clip #: ' + element.clipNumber);
    };  
  });
````

Extract Questions from Adobe XMP<sup>TM</sup> Metadata File
-----------------------------------------------------------
````javascript
var Assessment = require('ps-assessment'),
    path = require('path');

var xmpFiles = [path.join(sourcePath, 'clip1.xmp'),
                        path.join(sourcePath, 'clip2.xmp')];

Assessment.loadQuestionsFromXmpFiles(xmpFiles)
  .then(function (assessment) {
    assessment.questions.forEach(element){
      Console.log('question: ' + element.question);
      element.answers.forEach(answer){
        Console.log(' answer: ' + answer)
      };
      Console.log('clip #: ' + element.clipNumber);
    };  
  });
````

Validate Assessment Questions
-----------------------------
````javascript
var Assessment = require('ps-assessment');

var assessment = new Assessment();

// add assessment questions via code or by loading

var results = assessment.validate();

if (results.length == 0){
  Console.log('all questions valid');
} else {
  Console.log('errors in assessment question file:');
  results.forEach(errorMessage){
    Console.log(' > ' + errorMessage);
  }
}

````

Create Assessment File
----------------------
````javascript
var Assessment = require('ps-assessment');

var buildPath = path.join(sourcePath, 'deliveryFolder');
var moduleNumber = 1;
var assessment = new Assessment();

assessment.questions.push({
    question: 'Q) Question number 1',
    answers: ['- answer 1', '- answer 2', '* answer 3'],
    clipNumber: 1,
    timeCode: '12:34'
});
assessment.questions.push({
    question: 'Q) Question number 2',
    answers: ['- answer 4', '- answer 5', '* answer 6'],
    clipNumber: 1,
    timeCode: '34:56'
});
// creates questions.txt or no-questions.txt depending if questions present in assessment
assessment.createAssessmentFile('foo-fundamentals', moduleNumber, buildPath)
  .then(function (filePath) {
    Console.log('assessment questions filepath: ' +filePath);
  });
````

See the tests for full usage.


Development
-----------
The package is written in [TypeScript](http://www.typescriptlang.org), however only the [transpiled](http://en.wikipedia.org/wiki/Source-to-source_compiler) JavaScript is included in the NPM package. In TypeScript development, it's common to use a bunch of `/// <reference path="" />` blocks and the TypeScript compiler generates a source map file that is included at the bottom of the generated JavaScript files. Prior to uploading this to NPM, I've removed these extra comments using a custom [gulp](http://gulpjs.com) task.

If you want to see the full source prior to the "scrubbing" done to prepare for publication to NPM, just get the entire source and run an included gulp task to compile everything.

The type definitions used in the source of this project were acquired from the [DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped) project. They are all saved in the `tsd.json` file and can be downloaded by running the following:

````
$ tsd reinstall -o
````

[![Analytics](https://ga-beacon.appspot.com/UA-59891462-1/node-ps-assessment/readme)](https://github.com/igrigorik/ga-beacon)